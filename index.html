<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <link href="styles/styles.css" rel="stylesheet">

    <title>R4G</title>

    <!-- scripts for blockly code -->
    <script src="blockly/blockly_compressed.js"></script>
    <script src="blockly/blocks_compressed.js"></script>
    <script src="blockly/js/de.js"></script>
    <script src="blockly/javascript_compressed.js"></script>
</head>

<!-- body -->

<body ontouchstart="" id="body">
    <!-- ontouchstart="" enables low-delay CSS transitions. -->

    <table>
        <tr>
            <!-- Title, Logo and Program commands -->
            <img src="media/logo/R4G_Logo_rose_gradient.png" class="logo" style="float:left;margin-top: 20px; margin-left: 5px; height:70px;width:140px;">
			
            <!-- Bluetooth connection -->
            <div class="bluetooth" style="margin-top: 40px;">
                <button id="connect" type="button" class="button blue">Verbinden</button>
            </div>
			
			<!-- Menu dropdown -->
            <div class="dropdown" style="float:right;margin-top: 40px;">
                <button onclick="showMenu()" class="dropbtn button black" style="margin-right:30px;">Menu</button>
                <div id="myDropdown" class="dropdown-content">
                    <button id="disconnect" class="tablinks gray">Trennen</button>
                    <button id="endProgram" class="tablinks gray" onclick="end_program()">Beenden</button>
					<button class="tablinks gray" onclick="deleteAll()">Speicher freigeben</button>
				</div>
            </div>
			
			<!-- Program dropdown -->
			<div class="dropdown" style="float:right;margin-top:40px;">
				<button onclick="showMenu('programDropdown')" class="dropbtn button black" style="margin-right:30px;">Programm</button>

				<!-- Load/Save or Delete program from Dropdown menu -->
				<div id="programDropdown" class="dropdown-content" >
					<div id="container" class="tablinks gray" >
						<p style="margin-bottom:5px;margin-top:5px;font-size: 13px; color: black;">Programm auswählen</p>
						<select id="generate" class="tablinks dropbtn button black select" onclick="createMenu()"></select>

						<button id="saveData" class="tablinks button green programButtons" onclick="save()">Speichern</button>
						<button id="restoreData" class="tablinks button blue programButtons" onclick="restore()">Laden</button>
						<button class="tablinks button rosy programButtons" onclick="deleteItem()" >Löschen</button>

					</div>
				</div>	
            </div>
        </tr>
        <tr>
            <td>
                <!-- play/stop button starts/stops blockly code execution -->
                <div class="control_buttons" style="margin-top: 10px;">
                    <button id="start" onclick="handlePlay();" type="button" class="button green" style="float:left; margin-left:10px;font-size: 13px;padding-left:30px;padding-right: 30px;">Start</button>
                    <button id="stop" type="button" class="button rosy" style="float:left; margin-left:20px;font-size: 13px;">Stopp</button>
                </div>
            </td>
        </tr>
        <tr>
            <!-- Area for blockly workspace -->
            <td id="blocklyArea"></td>
        </tr>
    </table>

    <!-- script for bluetooth communication -->
    <script type="text/javascript" src="scripts/ble3.js"></script>
	<script type="text/javascript" src="scripts/controls.js"></script>

    <!-- blockly programming window -->
    <div id="blocklyDiv" style="position: absolute"></div>

    <!-- R4G blocks design -->
    <xml xmlns="http://www.w3.org/1999/xhtml" id="toolbox" style="display: none;">
        <!-- Category Movements -->
        <category name="Bewegungen" colour="#5b5ba5">
            <block type="forward">
                <field name="forward_duration">0.1</field>
            </block>
            <block type="back">
                <field name="back_duration">0.1</field>
            </block>
            <block type="left">
                <field name="left_duration">0.1</field>
            </block>
            <block type="right">
                <field name="right_duration">0.1</field>
            </block>
            <block type="turn_left">
                <field name="turn_left_duration">0.1</field>
            </block>
            <block type="turn_right">
                <field name="turn_right_duration">0.1</field>
            </block>
        </category>
        <category name="Kombinationen" colour="#a55b6d">
            <block type="dance">
                <field name="repeat">1</field>
                <field name="intensity">kurz</field>
            </block>
            <block type="zigzag">
                <field name="repeat">1</field>
                <field name="intensity">kurz</field>
            </block>
            <block type="shake">
                <field name="repeat">1</field>
                <field name="intensity">kurz</field>
            </block>
            <block type="pirouette">
                <field name="repeat">1</field>
                <field name="direction">Links</field>
            </block>
        </category>
        <category name="Melodie" colour="#a55b5b">
            <block type="melody">
                <field name="melody">M1</field>
            </block>
        </category>
        <category name="LED-Anzeige" colour="#5ba593">
            <block type="show_text"></block>
            <block type="show_picture">
                <field name="pic">Wähle ein Bild</field>
                <field name="show_duration">1</field>
            </block>
        </category>
        <category name="Steuerung" colour="#5ba55b">
            <block type="repetition">
                <field name="repetition">1</field>
            </block>
			<block type="wait_seconds">
				<field name="seconds">1</field>
			</block>
			<block type="start_block"></block>
        </category>
        <category name="Einstellungen" colour="#a5a55b">
            <block type="motor">
                <field name="motor">1</field>
                <field name="velocity">400</field>
            </block>
			<block type="turn_display" colour="#5ba593">
				<field name="degrees">0</field>
			</block>
        </category>
    </xml>
	
	<!-- Making Toolbox visible and resizable in Web-browser -->
    <script src="scripts/blocklyArea.js"></script>
	
    <!-- Blockly R4G blocks script -->
    <script src="scripts/R4Gblocks.js"></script>

</body>

</html>