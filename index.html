<!DOCTYPE html>
<html>

<head>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, user-scalable=no
		initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

	<title>R4G</title>

	
  
  <script src="blockly_compressed.js"></script>
  <script src="blocks_compressed.js"></script>
  <script src="en.js"></script>
  <style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }
    h1 {
      font-weight: normal;
      font-size: 140%;
    }
  </style>
</head>

<body ontouchstart="" id='i2'><!-- ontouchstart="" enables low-delay CSS transitions. -->

	
  <div id="blocklyDiv" style="height: 400px; width: 600px;"></div>

  <xml id="toolbox" style="display: none">
    <category name="Loops" colour="120">
      <block type="controls_repeat_ext">
        <value name="TIMES">
          <shadow type="math_number">
            <field name="NUM">5</field>
          </shadow>
        </value>
      </block>
    </category>
    <category name="Sounds" colour="355">
      <block type="play_sound"></block>
    </category>
   
  </xml>
  <button onclick="onPlay" type="button">Play</button>
  <script>
    var demoWorkspace = Blockly.inject('blocklyDiv',
        {media: 'C:\Users\erisa\Desktop\Arbeit\R$G\microbitR4G\blockly-master\media',
         toolbox: document.getElementById('toolbox')});
	  
	function onPlay(){ 
	   const MusicMaker = {
  queue_: [],
  player_: new Audio(),
  queueSound: function(soundUrl) {
    this.queue_.push(soundUrl);
  },
  play: function() {
    let next = this.queue_.shift();
    if (next) {
      this.player_.src = next;
      this.player_.play();
    }
  },
};

MusicMaker.player_.addEventListener(
    'ended', MusicMaker.play.bind(MusicMaker));
	}
  </script>
<script src="scripts\main.js"></script>
<script src="scripts\music_maker.js"></script>
<script src="scripts\sound_blocks.js"></script>
</body>

</html>
